{% extends 'base.html' %}

{% block content %}
  <h2>Gestionar Promociones</h2>

  {# This form will be conditionally displayed by the @feature_flag decorator #}
  <div id="promo-editor-form">
      <h3>Crear Nueva Promoci√≥n</h3>
      <form method="post">
          <label for="name">Nombre</label>
          <input name="name" id="name" required>
          <br>
          <label for="discount_percent">Descuento (%)</label>
          <input type="number" step="0.1" name="discount_percent" id="discount_percent" required>
          <br>
          <label for="start_date">Fecha de Inicio</label>
          <input type="date" name="start_date" id="start_date" required>
          <br>
          <label for="end_date">Fecha de Fin</label>
          <input type="date" name="end_date" id="end_date" required>
          <br>
          <input type="submit" value="Crear">
      </form>
  </div>

  <h3>Promociones Existentes</h3>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Descuento</th>
        <th>Fecha de Inicio</th>
        <th>Fecha de Fin</th>
      </tr>
    </thead>
    <tbody>
      {% for promo in promotions %}
        <tr>
          <td>{{ promo['id'] }}</td>
          <td>{{ promo['name'] }}</td>
          <td>{{ promo['discount_percent'] }}%</td>
          <td>{{ promo['start_date'] }}</td>
          <td>{{ promo['end_date'] }}</td>
        </tr>
      {% else %}
        <tr>
          <td colspan="5">No se encontraron promociones.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
